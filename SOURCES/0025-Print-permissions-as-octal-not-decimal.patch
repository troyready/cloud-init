From 3ac8771cb789c7565ddc6b6a0557b1dc4b155955 Mon Sep 17 00:00:00 2001
From: Andrew Jorgensen <ajorgens@amazon.com>
Date: Fri, 5 Dec 2014 14:34:10 -0800
Subject: [PATCH] Print permissions as octal, not decimal

Reviewed-by: Tom Kirchner <tjk@amazon.com>
---
 cloudinit/config/cc_write_files.py | 4 +++-
 cloudinit/util.py                  | 2 +-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/cloudinit/config/cc_write_files.py b/cloudinit/config/cc_write_files.py
index a73d6f4..d6721a0 100644
--- a/cloudinit/config/cc_write_files.py
+++ b/cloudinit/config/cc_write_files.py
@@ -1,8 +1,10 @@
 # vi: ts=4 expandtab
 #
 #    Copyright (C) 2012 Yahoo! Inc.
+#    Copyright (C) 2014 Amazon.com, Inc. or its affiliates.
 #
 #    Author: Joshua Harlow <harlowja@yahoo-inc.com>
+#    Author: Andrew Jorgensen <ajorgens@amazon.com>
 #
 #    This program is free software: you can redistribute it and/or modify
 #    it under the terms of the GNU General Public License version 3, as
@@ -86,7 +88,7 @@ def decode_perms(perm, default, log):
             # Force to string and try octal conversion
             return int(str(perm), 8)
     except (TypeError, ValueError):
-        log.warn("Undecodable permissions %s, assuming %s", perm, default)
+        log.warn("Undecodable permissions %s, assuming %o", perm, default)
         return default
 
 
diff --git a/cloudinit/util.py b/cloudinit/util.py
index 35ccd09..7ba79e1 100644
--- a/cloudinit/util.py
+++ b/cloudinit/util.py
@@ -1542,7 +1542,7 @@ def write_file(filename, content, mode=0644, omode="wb"):
     @param omode: The open mode used when opening the file (r, rb, a, etc.)
     """
     ensure_dir(os.path.dirname(filename))
-    LOG.debug("Writing to %s - %s: [%s] %s bytes",
+    LOG.debug("Writing to %s - %s: [%o] %s bytes",
                filename, omode, mode, len(content))
     with SeLinuxGuard(path=filename):
         with open(filename, omode) as fh:
-- 
2.1.0

